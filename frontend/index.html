<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Management</title>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.6.7/dist/axios.min.js"></script>
</head>
<body>
    <div id="test"></div>
    <script>
        // Function to fetch and display students
        const fetchStudents = () => {
            axios.get('http://127.0.0.1:8000/students')
                .then(res => {
                    console.log(res.data);
                    const students = res.data.students;
                    let html = '<table border="1"><tr><th>ID</th><th>Name</th><th>Age</th><th>DELETE</th></tr>';
                    students.forEach(student => {
                        html += `<tr><td>${student.id}</td><td>${student.Name}</td><td>${student.age}</td><td><button onclick="deleteUser(${student.id})">DELETE</button></td></tr>`;
                    });
                    html += '</table>';
                    document.getElementById('test').innerHTML = html;
                })
                .catch(error => {
                    console.error('Error fetching students:', error);
                });
        };

        // Function to delete a student
        const deleteUser = (studentId) => {
            axios.delete(`http://127.0.0.1:8000/deleteStudent/${studentId}`)
                .then(res => {
                    console.log('Student deleted:', studentId);
                    // Optional: Refresh the student list after deletion
                    fetchStudents();
                })
                .catch(error => {
                    console.error('Error deleting student:', error);
                });
        };

        // Ensure the DOM is fully loaded before executing JavaScript
        document.addEventListener('DOMContentLoaded', fetchStudents);
    </script>
</body>
</html>
